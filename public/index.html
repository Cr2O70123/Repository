<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Clash Online</title>
    <link rel="stylesheet" href="style.css">
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>

    <!-- 1. 登入頁面 -->
    <div id="page-login" class="page active">
        <div class="panel">
            <h1>CLASH ONLINE</h1>
            <div class="subtitle">榮耀戰場</div>
            <input type="text" id="username-input" class="input-box" placeholder="輸入暱稱 (ID)" maxlength="10">
            <button class="btn" onclick="App.login()">進入遊戲</button>
        </div>
    </div>

    <!-- 2. 大廳 (Lobby) -->
    <div id="page-lobby" class="page hidden">
        <div class="lobby-header">
            <div class="user-badge">👤 <span id="lobby-name">Player</span></div>
            <div class="currency-badge">💰 <span id="lobby-gold">0</span></div>
        </div>
        
        <div class="panel transparent-panel">
            <h1 class="small-title">準備戰鬥</h1>
            <div class="status-text" id="match-status">等待開始...</div>
            <button class="btn btn-large" onclick="App.findMatch()">開始對戰</button>
            
            <div class="menu-grid">
                <button class="btn btn-sec" onclick="App.nav('shop')">🛒 商店</button>
                <button class="btn btn-sec" onclick="App.nav('deck')">🃏 牌組</button>
                <button class="btn btn-sec" onclick="App.nav('leaderboard')">🏆 排行</button>
                <button class="btn btn-sec" onclick="App.nav('profile')">📊 戰績</button>
            </div>
        </div>
    </div>

    <!-- 3. 商店 (Shop) -->
    <div id="page-shop" class="page hidden">
        <div class="header-bar"><button class="btn-back" onclick="App.nav('lobby')">⬅</button> 商店</div>
        <div class="currency-float">💰 <span id="shop-gold">0</span></div>
        <div id="shop-grid" class="scroll-content"></div>
    </div>

    <!-- 4. 排行榜 (Leaderboard) -->
    <div id="page-leaderboard" class="page hidden">
        <div class="header-bar"><button class="btn-back" onclick="App.nav('lobby')">⬅</button> 世界排行</div>
        <div class="panel full-panel">
            <table id="rank-table">
                <thead><tr><th>#</th><th>玩家</th><th>勝場</th><th>勝率</th></tr></thead>
                <tbody id="rank-list"></tbody>
            </table>
        </div>
    </div>

    <!-- 5. 個人檔案 (Profile) -->
    <div id="page-profile" class="page hidden">
        <div class="header-bar"><button class="btn-back" onclick="App.nav('lobby')">⬅</button> 個人戰績</div>
        <div class="panel">
            <h2 id="p-name" style="color:var(--accent)">-</h2>
            <div class="stat-row">勝場: <span id="p-wins" style="color:#2ecc71">0</span></div>
            <div class="stat-row">敗場: <span id="p-loss" style="color:#e74c3c">0</span></div>
            <div class="stat-row">勝率: <span id="p-rate">0%</span></div>
        </div>
    </div>

    <!-- 6. 牌組編輯 (Deck) -->
    <div id="page-deck" class="page hidden">
        <div class="header-bar"><button class="btn-back" onclick="App.nav('lobby')">⬅</button> 編輯牌組 (6張)</div>
        <div id="deck-grid" class="scroll-content grid-view"></div>
        <button class="btn" style="position:absolute; bottom:20px;" onclick="App.saveDeck()">保存配置</button>
    </div>

    <!-- 7. 遊戲畫面 (Game) -->
    <div id="page-game" class="page hidden">
        <div id="game-container">
            <div id="canvas-wrapper">
                <canvas id="gameCanvas"></canvas>
                <div id="hud-top">
                    <div id="enemy-info">⚔️ <span id="enemy-name-txt">對手</span></div>
                    <div id="timer-box"><div id="timer">03:00</div></div>
                </div>
                <div id="elixir-mode-txt">雙倍聖水時刻!</div>
                <div id="message"></div>
                <div id="emote-wrapper">
                    <div id="emote-menu">
                        <div class="emote-opt" onclick="Game.triggerEmote('😂')">😂</div>
                        <div class="emote-opt" onclick="Game.triggerEmote('😡')">😡</div>
                        <div class="emote-opt" onclick="Game.triggerEmote('😭')">😭</div>
                        <div class="emote-opt" onclick="Game.triggerEmote('👍')">👍</div>
                    </div>
                    <div id="emote-btn" onclick="document.getElementById('emote-menu').classList.toggle('open')">💬</div>
                </div>
            </div>
            <div id="ui-layer">
                <div id="elixir-area">
                    <div id="elixir-badge">5</div>
                    <div id="elixir-bar-bg"><div id="elixir-fill"></div></div>
                </div>
                <div id="deck-area">
                    <div id="next-slot">
                        <span class="slot-label">下張</span>
                        <div class="card"><div class="card-inner"><div class="emoji" id="next-icon">?</div></div></div>
                    </div>
                    <div id="hand-cards"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 8. 結算畫面 -->
    <div id="page-result" class="page overlay hidden">
        <h1 id="end-title" style="font-size:80px;">勝利</h1>
        <div style="margin-bottom:20px; font-size:24px; color:#f1c40f;">獲得金幣: <span id="reward-gold">0</span></div>
        <button class="btn" onclick="App.nav('lobby')">返回大廳</button>
    </div>

    <script src="js/data.js"></script>
    <script src="js/game.js"></script>
</body>
</html>